{% load staticfiles %}
{% load comments %}

{% block additional_headers %}
  <script type="text/javascript" src="{% static "js/feed.js" %}"></script>
  <script src="{{ STATIC_URL }}endless_pagination/js/endless-pagination.js"></script>
  <script>
    $.endlessPaginate({
      paginateOnScroll: true,
      paginateOnScrollMargin: 300,
      onCompleted: function () {
        COMMENTS.registerAllTheElements();
        COMMENTS.stopPolling();
        loadFilter();
      }
    });
  </script>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/feed.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/chat.css" type="text/css" media="screen"/>
{% if not user.is_staff %}
<style>
	.button_add_comment_form {display:none;}
	.comment_actions {display:none;}
	#lindicator {display:none!important;}
	.response_actions {display:none;}
</style>
{% endif %}
{% endblock %}

{% block content %}
    {% comments_boilerplate %}

<div id="comments_column_1">
      <div class="feed_header newsfeed" id="all_the_news">
        <i class="fa fa-angle-up fa-2x half eventually rotare"></i> 
        <b>Newsfeed</b>
        </div>
		<div id="content_all_the_news">
		<ul class="toolbar">
			<li class="button filterbtn" id="1" title="Show all comments" onclick="filterClick(this.id,'{{user.username}}');"><i class="fa fa-eye"></i> show All</li>
{% comment%}
			<li class="button filterbtn" id="3" title="Show only top-level comments from the course team" onclick="filterClick(this.id,'{{user.username}}');"><i class="fa fa-eye"></i> Announcements</li>
			<li class="button filterbtn" id="2" title="Show only comments posted by lecturers, tutors or yourself" onclick="filterClick(this.id,'{{user.username}}');"><i class="fa fa-eye"></i> Lecturer Comments</li>
			<li class="button filterbtn" id="4" title="Show only top-level comments, hide all replies." onclick="filterClick(this.id,'{{user.username}}');"><i class="fa fa-eye"></i> no replies</li>
{% endcomment%}

			<li class="button filterbtn" id="0" title="Show only comments posted after you activate this filter" onclick="markT('{{user.username}}');filterClick(this.id,'{{user.username}}')"><i class="fa fa-eye"></i> show only new <span id="new_date"></span></li>
{% comment%}
			{% if user.is_staff %}
			<li class="button filterbtn" id="99" title="Show only staff comments" onclick="filterClick(this.id,'{{user.username}}');"></i>[+S]</li>
			{% endif %}
			{% if user.is_staff %}
			<li class="button filterbtn" id="98" title="Show no staff comments" onclick="filterClick(this.id,'{{user.username}}');"></i>[-S]</li>
			{% endif %}
{% endcomment%}
			
		</ul>
		<div id="lindicator" style="display:none;float:right;position:relative;top:15px;color:silver;font-size:9px">â€¢</div>
        {% render_multi_comment_list for newsfeed %}
		</div>
</div>
{% comment %}
<div id="chat_column_1_header">
      <div class="feed_header newsfeed" id="all_the_news">
        <i class="fa fa-angle-up fa-2x half eventually rotare"></i>
        <b>Chat</b>
      </div>
</div>
<div id="chat_column_1">
  {#    {% comments_boilerplate %}#}

  {% if not DEV_FRONTEND %}
    <div id="chat-root"></div>
    <script type="text/javascript" src={% static "chat/js/main.2ed1f267.js" %}></script>
  {% else %}
    <iframe frameborder="0" src="http://localhost:3000" height="100%" width="580"></iframe>
  {% endif %}
  </div>
</div>
{% endcomment %}	
{% endblock content %}